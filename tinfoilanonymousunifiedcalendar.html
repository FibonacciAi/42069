<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Timeline Analysis</title>
    <style>
        :root {
            --bg-color: #000;
            --text-color: #fff;
            --accent1: #00ffcc;
            --accent2: #ff00cc;
            --accent3: #ccff00;
            --card-bg: #1a1a1a;
            --border-glow: 0 0 10px var(--accent1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: var(--bg-color);
            color: var(--text-color);
            font-family: 'Courier New', monospace;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 100%;
            padding: 10px;
        }

        .control-section {
            background: var(--card-bg);
            border: 1px solid var(--accent1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--border-glow);
        }

        .title {
            font-size: 1.2em;
            margin-bottom: 10px;
            color: var(--accent1);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .button {
            background: #333;
            border: none;
            color: var(--text-color);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
        }

        .button:hover {
            background: var(--accent1);
            color: var(--bg-color);
        }

        .date-input {
            background: #333;
            border: 1px solid var(--accent1);
            color: var(--text-color);
            padding: 8px;
            border-radius: 5px;
            font-family: inherit;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .result-card {
            background: var(--card-bg);
            border: 1px solid var(--accent2);
            border-radius: 10px;
            padding: 15px;
        }

        .pattern-highlight {
            color: var(--accent3);
            font-weight: bold;
        }

        .timeline {
            position: relative;
            height: 40px;
            background: #333;
            margin: 10px 0;
            border-radius: 5px;
        }

        .marker {
            position: absolute;
            width: 2px;
            height: 100%;
            background: var(--accent1);
        }

        .connection-line {
            position: absolute;
            height: 2px;
            background: var(--accent2);
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="control-section">
            <div class="title">Timeline Controls</div>
            <div class="controls">
                <button class="button" onclick="analyze(3)">×3</button>
                <button class="button" onclick="analyze(9)">×9</button>
                <button class="button" onclick="analyze(33)">×33</button>
                <button class="button" onclick="analyze(333)">×333</button>
                <input type="date" class="date-input" id="dateInput" onchange="analyzeDate(this.value)">
            </div>
        </div>

        <div class="control-section">
            <div class="title">Pattern Search</div>
            <div class="controls">
                <input type="number" class="date-input" id="patternInput" placeholder="Enter number...">
                <button class="button" onclick="findPatterns()">Search Patterns</button>
            </div>
        </div>

        <div id="resultsContainer" class="results-grid"></div>
    </div>

    <script>
        const keyDates = {
            historical: {
                'RC_2019': '2019-01-01', // Adjust this date as needed
            },
            forward: {
                'RK': '2020-08-30',
                'Oct21': '2021-10-26',
                'FirstRef': '2022-04-06',
                'Primary': '2024-04-16'
            },
            backward: {
                'June25': '2025-06-01',
                'April25': '2025-04-01',
                'March25': '2025-03-15'
            }
        };

        function getDaysBetween(date1, date2) {
            const d1 = new Date(date1);
            const d2 = new Date(date2);
            return Math.floor((d2 - d1) / (1000 * 60 * 60 * 24));
        }

        function getDateFromDays(startDate, days) {
            const date = new Date(startDate);
            date.setDate(date.getDate() + days);
            return date.toISOString().split('T')[0];
        }

        function findPatterns() {
            const number = parseInt(document.getElementById('patternInput').value);
            const results = document.getElementById('resultsContainer');
            results.innerHTML = '';

            // Create pattern card
            const patternCard = document.createElement('div');
            patternCard.className = 'result-card';
            
            // Forward analysis
            let forwardAnalysis = '<h3>Forward Patterns</h3>';
            Object.entries(keyDates.forward).forEach(([name, date]) => {
                const targetDate = getDateFromDays(date, number);
                forwardAnalysis += `
                    <p>${name}: Day ${number} = ${targetDate}</p>
                `;
            });

            // Backward analysis
            let backwardAnalysis = '<h3>Backward Patterns</h3>';
            Object.entries(keyDates.backward).forEach(([name, date]) => {
                const targetDate = getDateFromDays(date, -number);
                backwardAnalysis += `
                    <p>${name}: ${number} days before = ${targetDate}</p>
                `;
            });

            // Historical connections
            let historicalAnalysis = '<h3>Historical Connections</h3>';
            Object.entries(keyDates.historical).forEach(([name, date]) => {
                const forwardDays = Object.entries(keyDates.forward).map(([fwdName, fwdDate]) => {
                    return {
                        name: fwdName,
                        days: getDaysBetween(date, fwdDate)
                    };
                });

                historicalAnalysis += `<p>From ${name}:</p>`;
                forwardDays.forEach(({name: fwdName, days}) => {
                    historicalAnalysis += `<p>${fwdName}: Day ${days}</p>`;
                });
            });

            patternCard.innerHTML = forwardAnalysis + backwardAnalysis + historicalAnalysis;
            results.appendChild(patternCard);
        }

        function analyzeDate(date) {
            const results = document.getElementById('resultsContainer');
            results.innerHTML = '';

            const analysisCard = document.createElement('div');
            analysisCard.className = 'result-card';
            
            let analysis = '<h3>Date Analysis</h3>';

            // Forward counting
            Object.entries(keyDates.forward).forEach(([name, startDate]) => {
                const days = getDaysBetween(startDate, date);
                analysis += `<p>${name} + ${days} days = ${date}</p>`;
            });

            // Backward counting
            Object.entries(keyDates.backward).forEach(([name, endDate]) => {
                const days = getDaysBetween(date, endDate);
                analysis += `<p>${days} days until ${name} (${endDate})</p>`;
            });

            // Pattern recognition
            const dayNumbers = new Set();
            Object.entries(keyDates.forward).forEach(([_, startDate]) => {
                dayNumbers.add(getDaysBetween(startDate, date));
            });

            if (dayNumbers.size < Object.keys(keyDates.forward).length) {
                analysis += '<p class="pattern-highlight">Pattern detected: Same day count on multiple calendars!</p>';
            }

            analysisCard.innerHTML = analysis;
            results.appendChild(analysisCard);
        }

        function analyze(multiplier) {
            const results = document.getElementById('resultsContainer');
            results.innerHTML = '';

            const multiplierCard = document.createElement('div');
            multiplierCard.className = 'result-card';
            
            let analysis = `<h3>Analysis of ×${multiplier}</h3>`;

            Object.entries(keyDates.forward).forEach(([name, startDate]) => {
                const targetDate = getDateFromDays(startDate, multiplier);
                analysis += `<p>${name}: Day ${multiplier} = ${targetDate}</p>`;
            });

            // Special handling for 121-type patterns
            if (multiplier === 121) {
                analysis += '<h4>121 Pattern Analysis</h4>';
                const historicalDates = Object.entries(keyDates.historical);
                const forwardDates = Object.entries(keyDates.forward);
                
                historicalDates.forEach(([histName, histDate]) => {
                    forwardDates.forEach(([fwdName, fwdDate]) => {
                        const connection = getDaysBetween(histDate, fwdDate) % 121;
                        if (connection === 0) {
                            analysis += `<p class="pattern-highlight">Connection found: ${histName} to ${fwdName}</p>`;
                        }
                    });
                });
            }

            multiplierCard.innerHTML = analysis;
            results.appendChild(multiplierCard);
        }

        // Initialize with today's date
        document.getElementById('dateInput').valueAsDate = new Date();
    </script>
</body>
</html>